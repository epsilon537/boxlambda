start

XXXXXX> (vera :init)
nil

XXXXXX>
(defun scanline_test ()
  (loop (if (= (vera_scanline) 0) (return)))
  (vera :irqline 400)
  (vera :isr :set :mask VERA_IRQ_LINE)
  (vera :ien :set :mask VERA_IRQ_LINE)
  (loop (if (= VERA_IRQ_LINE (vera_isr)) (return)))
  (let ((scanline (vera_scanline)))
  (if (and (>= scanline 400) (< scanline 480))
      (print "OK")
      (format t "Fail ~a~%" scanline))))
scanline_test

XXXXXX>
(scanline_test)

"OK"
"OK"

XXXXXX>



'end
end
